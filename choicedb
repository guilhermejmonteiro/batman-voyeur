using Microsoft.EntityFrameworkCore;

public class UserChoiceContext : DbContext
{
    public DbSet<UserChoice> UserChoices { get; set; }

    protected override void OnConfiguring(DbContextOptionsBuilder optionsBuilder)
    {
        optionsBuilder.UseSqlite("Data Source=userchoices.db");
    }
}

public class UserChoice
{
    public long ChatId { get; set; }
    public int UserId { get; set; }
    public string Category { get; set; }
}

public class UserChoiceRepository
{
    private readonly UserChoiceContext _context;

    public UserChoiceRepository(UserChoiceContext context)
    {
        _context = context;
    }

    public void SaveUserChoice(long chatId, int userId, string category)
    {
        var userChoice = new UserChoice { ChatId = chatId, UserId = userId, Category = category };
        _context.UserChoices.Add(userChoice);
        _context.SaveChanges();
    }

    public string GetCategoryFromUserChoice(long chatId, int userId)
    {
        var userChoice = _context.UserChoices.FirstOrDefault(uc => uc.ChatId == chatId && uc.UserId == userId);
        return userChoice?.Category ?? "DefaultCategory";
    }

    
}
